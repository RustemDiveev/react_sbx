<!DOCTYPE HTML>
<html>

    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/common.css">
    </head>

    <body>

        <button><a href="../start_here.html">К содержанию</a></button> 
        <h1>Преобразование типов для примитивов</h1>

        <p>
            Система простая, но отличается от других языков. Есть следующие преобразования:
            <ol>
                <li>Строковое преобразование</li>
                <li>Числовое преобразование</li>
                <li>Преобразование к логическому значению</li>
            </ol>
            Описываются только преобразования примитивных значений. Объекты будут дальше.
        </p>

        <h2>Строковое преобразование</h2>
        <p>
            Его выполняет, например, функция alert, или консоль браузера. Можно осуществить при помощи вызова String(val). 
        </p>

<code>
String(null) === "null"
</code>
        <p>
            Также, для явного преобразования используется оператор "+", у которого один из аргументов - строка. <br>
            Тогда к строке приводится и другой аргумент. 
        </p>
<code>
true + "test" // truetest 
"123" + undefined // 123undefined
</code>

        <h2>Численное преобразование</h2>
        <p>
            Происходит в математических функциях и выражениях, при сравнении данных различных типов (кроме сравнений ===, !==).
        </p>
        <p>
            Для преобразования к числу в явном виде можно вызвать Number(val) или поставить унарный +. 
        </p>
<code>
var a = +"123"; //123
var a = Number("123"); // 123 

+undefined // NaN 
+null // 0 
+true // 1 
+false // 0 
+"    123    " // 123
+" alalala " // NaN
</code>

        <p>
            Есть следующие приколы со специальными значениями null и undefined:
        </p>
<code>
Number(undefined)   -> NaN 
Number(null)        -> 0 

null >= 0           // true, null -> 0 
null > 0            // false 
null == 0           // null -> 0, но рассматривается особо, ничему не равен кроме себя 

undefined > 0       // false, undefined -> NaN 
undefined == 0      // false, ничему не равен кроме себя 
undefined < 0       // false 

// Вывод: не надо давать специальным значениям участвовать в операциях сравнения 
</code>

        <h2>Логическое преобразование</h2>
        <p>
            Преобразование к true/false происходит в логическом контексте, например, if(value) и при применении логических операторов.
        </p>
        <p>
            Все значения, которые интуитивно пусты, становятся False (0, "", null, undefined, NaN)
        </p>
<code>
undefined, null             -> false 
Числа                       -> Все true, кроме 0 и NaN 
Строки                      -> Все true, кроме пустой строки 
Объекты                     -> Всегда true 
</code>
        <p>
            Для явного преобразования используется двойное логическое отрицание !!value или вызов Boolean(value)
        </p>

        <h3>Строка "0" приводится к true, строка из пробелов тоже</h3>
<code>
!!"0" // true 
!!" " // true
</code>

        <h3>Логическое и численное преобразование</h3>
        <p>
            Два значения могут быть равны, но одно в логическом контексте - true, другое - false.
        </p>
<code>
0 == "\n0\n" // true (численное преобразование)

if ("\n0\n") {
    alert("блаблабла");  
} // true (логическое преобразование)
</code>

        <h3>Задачи</h3>
<code>
"" + 1 + 0          // "10"
                    // если есть строка и бинарный плюс, то делает преобразование в строку
"" - 1 + 0          // -1 
                    // оператор "-" если есть строка и число, то преобразует строку в число (пытается) 
true + false        // 1 
                    // true = 1, false = 0, преобразование в число 
6 / "3"             // 2
                    // при делении пытается привести строку в число 
"2" * "3"           // 6 
                    // пытается преобразовать в число, если не получается - возвращает NaN
4 + 5 + "px"        // 9px 

"$" + 4 + 5         // "$45"

"4" - 2             // 2 

"4px" - 2           // NaN

7 / 0               // Infinity 
                    // При делении на 0 - возвращается Infinity, а не NaN
" -9\n" + 5         // " -9\n5"

" -9\n" - 5         // -14 

5 && 2              // 2 

2 && 5              // 5 

5 || 0              // 5 

0 || 5              // 5 

null + 1            // 1

undefined + 1       // NaN

null == "\n0\n"     // false 

+null == +"\n0\n"   // true 
</code>

    </body>

</html>