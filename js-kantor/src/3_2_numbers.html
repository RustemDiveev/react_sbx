<!DOCTYPE HTML>
<html>

    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/common.css">

        <!-- МОЧА -->
        <link rel="stylesheet" href="../node_modules/mocha/mocha.css">
        <script src="../node_modules/mocha/mocha.js"></script>
        <script>
            mocha.setup('bdd');
        </script>

        <!-- ЧАЕЦ -->
        <script src="../node_modules/chai/chai.js"></script>
        <script>
            let assert = chai.assert;
            let expect = chai.expect;
        </script>

        <script src="./js/3_1_script.js"></script>
    </head>

    <body>
        <button><a href="../start_here.html">К содержанию</a></button> 
        <h1>Числа</h1>
        <p>
            Все числа в JavaScript, как целые так и дробные, имеют тип Number и хранятся в 64-битном формате IEEE-754, 
            также известном как double precision.
        </p>
        
        <h2>Способы записи</h2>
        <ul>
            <li>
                В десятичной: 255;
            </li>
            <li>
                В шестнадцатеричной: 0xFF;
            </li>
            <li>
                В научном формате: 3e5, 3e-5;
            </li>
        </ul>

        <h2>Деление на ноль, Infinity</h2>
        <p>
            В большинстве ЯП деление на ноль выбросит ошибку. Но, блин, не в js.
            Здесь при делении на очень маленькое число - должно получится что-то большое. 
            Таким образом, деление на ноль возвращает специальное значение - Infinity.
        </p>
<code>
alert(1 / 0); //Infinity
alert(12345 / 0); //Infinity
</code>
        <p>
            Infinity - особенное численное значение, которое ведет себя в точности как математическая 
            бесконечность. Есть и минус бесконечность.
            <ul>
                <li>
                    Infinity больше любого числа 
                </li>
                <li>
                    Добавление к бесконечности не меняет её
                </li>
            </ul>
        </p>
        
        <h2>NaN</h2>
        <p>
            Если математическая операция не может быть совершена, то возвращается специальное значение NaN.
            Например, 0 / 0 возвращает NaN.
            <ul>
                <li>
                    NaN - не равно ничему, включая себя. 
                    Таким образом можно проверить значение на равенство самому себе, и если не равно, то это NaN.
                </li>
                <li>
                    NaN можно проверить специальной функцией isNaN(n), преобразующей аргумент в число, 
                    и возвращающей true, если NaN, и false для других значений. 
                    Лучше пользоваться этой функцией для наглядности, вместо пункта выше.
                </li>
                <li>
                    Любая операция с NaN возвращает NaN.
                </li>
            </ul>
            <p>
                Все математические операции в js - безопасны. Не могут привести к ошибке или обрушить программу.
            </p>
        </p>

        <h2>isFinite(n)</h2>
            <p>
                Функция isFinite(n) преобразует аргумент к числу и возвращает true, если это не NaN/Infinity/-Infinity
            </p>
            <ul>
                <li>
                    isFinite(1); //true
                </li>
                <li>
                    isFinite(Infinity); //false 
                </li>
                <li>
                    isFinite(NaN); //false 
                </li>
            </ul>

        <h2>Преобразование к числу</h2>
            <p>
                Большинство арифметических операций и математических функций преобразуют значение в число автоматически.
            </p>
            <p>
                Чтобы сделать это явно, перед значение ставят унарный плюс "+". Например, +"12.34" -> 12.34
            </p>
            <p>
                При этом, если строка не является в точности числом, то результат будет NaN. Например, +"12test" -> NaN
            </p>
            <p>
                Единственное исключение - пробельные символы в начале и конце строки - игнориуются. Например:
                <ul>
                    <li>+"   -12" === -12</li>
                    <li>+" \n 34 \n " === 34 </li>
                    <li>+"" === 0</li>
                    <li>isNaN(+"1 2") === true</li>
                    <li>"12.34" / "-2" === -6.17</li>
                </ul>
            </p>

        <h2>Мягкое преобразование: parseInt и parseFloat</h2>
            <p>
                Функции parseInt и parseFloat преобразуют строку символ за символом, пока это возможно.
            </p>
            <p>
                При возникновении ошибки возвращается число, которое получилось. 
                Функция parseInt читает из строки целое число, а parseFloat - дробное.
            </p>
            <ul>
                <li>parseInt("12px") === 12</li>
                <li>parseFloat("12.3.4") === 12.3</li>
                <li>isNaN(parseInt("a123")) === true</li>
                <li>parseInt("FF", 16) === 255 // можно указать систему счисления у parseInt</li>
            </ul>

        <h2>Проверка на число</h2>
            <p>
                Для проверки строки на число можно использовать функцию isNaN(str). 
                Она преобразует строку в число аналогично +, а затем вернет true, если это NaN, т.е преобразование не удалось.
            </p>
            <p>
                Однако у такой проверки есть следующие особенности:
                <ul>
                    <li>
                        Пустая строка и строка из пробельных символов преобразуются к 0, поэтому считаются числами. 
                        <ul>
                            <li>isNaN("") === false</li>
                            <li>isNaN(" \n ") === false</li>
                        </ul>
                    </li>
                    <li>
                        isNaN посчитает числами false, true, null, так как они преобразуются к числам.
                        <ul>
                            <li>isNaN(false) === false</li>
                            <li>isNaN(true) === false</li>
                            <li>isNaN(null) === false</li>
                        </ul>
                    </li>
                </ul>
            </p>

            <p>
                Для точной проверки нужно писать свою функцию: 
<code>
function isNumeric(n) {
    return !isNaN(
        parseFloat(n)  // отсеивает true, false, null, ""
        && isFinite(n) // вернет true, если это не Infinity/-Infinity/NaN
    );
}
</code>
                Отсеивается все, кроме строк-чисел и обычных чисел.
            </p>
    </body>

</html>